{"version":3,"file":"context-menu-plugin.esm.js","sources":["../src/utils.js","../src/menu/debounceHide.js","../src/menu/Item.vue","../src/menu/Search.vue","../src/menu/Menu.vue","../src/menu/index.js","../src/main-menu.js","../src/node-menu.js","../src/index.js"],"sourcesContent":["export function deepCopy(obj) {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nexport async function createNode(component, { data = {}, meta = {}, x = 0, y = 0 }) {\r\n    const node = await component.createNode(deepCopy(data));\r\n\r\n    node.meta = Object.assign(deepCopy(meta), node.meta);\r\n    node.position[0] = x;\r\n    node.position[1] = y;\r\n    \r\n    return node;\r\n}\r\n\r\nexport function traverse(items, callback, path = []) {\r\n    if (typeof items !== 'object') return;\r\n\r\n    Object.keys(items).map(key => {\r\n        if (typeof items[key] === 'function')\r\n            callback(key, items[key], path)\r\n        else \r\n            traverse(items[key], callback, [...path, key])\r\n    })\r\n}\r\n\r\nexport function fitViewport([x, y], element) {\r\n    return [\r\n        Math.min(x, window.innerWidth - element.clientWidth),\r\n        Math.min(y, window.innerHeight - element.clientHeight)\r\n    ]\r\n}\r\n\r\n// Cloneを外部から実行できる\r\nexport async function cloneNode(editor, node, isTrigger) {\r\n    const { name, position: [x, y], ...params } = node;\r\n    const component = editor.components.get(name);\r\n    const nodeFromClone = await createNode(component, { ...params, x: x + 10, y: y + 10 });\r\n\r\n    editor.addNode(nodeFromClone);\r\n    \r\n    const obj = { \r\n      node: node,\r\n      nodeFromClone: nodeFromClone,\r\n    };\r\n    \r\n    if (isTrigger) { // トリガーを無効化することでイベント内でさらにクローンしたとき無限ループを防げる\r\n      editor.trigger('nodeclone', obj);\r\n    }\r\n}","import { debounce } from 'lodash-es';\r\n\r\nexport default (hideMethod) => ({\r\n    props: { delay: { type: Number, required: true } },\r\n    data() {\r\n        return {\r\n            timeoutHide: () => {}\r\n        }\r\n    },\r\n    methods: {\r\n        cancelHide() {\r\n            const hide = this.timeoutHide;\r\n    \r\n            if (hide && hide.cancel)\r\n                this.timeoutHide.cancel();\r\n        }\r\n    },\r\n    mounted() {\r\n        this.timeoutHide = debounce(this[hideMethod], this.delay);\r\n    }\r\n})","<template lang=\"pug\">\r\n.item(\r\n  @click=\"onClick($event)\"\r\n  @mouseover=\"showSubitems()\"\r\n  @mouseleave=\"timeoutHide()\"\r\n  :class=\"{ hasSubitems }\"\r\n) {{item.title}}\r\n  .subitems(v-show=\"hasSubitems && this.visibleSubitems\")\r\n    Item(v-for=\"subitem in item.subitems\"\r\n      :key=\"subitem.title\"\r\n      :item=\"subitem\"\r\n      :args=\"args\"\r\n      :delay=\"delay\"\r\n      )\r\n</template>\r\n\r\n<script>\r\nimport hideMixin from './debounceHide'\r\n\r\nexport default {\r\n  name: 'Item',\r\n  mixins: [hideMixin('hideSubitems')],\r\n  props: { item: Object, args: Object },\r\n  data() {\r\n    return {\r\n      visibleSubitems: false, \r\n    }\r\n  },\r\n  computed: {\r\n    hasSubitems() {\r\n      return this.item.subitems\r\n    }\r\n  },\r\n  methods: {\r\n    showSubitems() {\r\n      this.visibleSubitems = true;\r\n      this.cancelHide();\r\n    },\r\n    hideSubitems() {\r\n      this.visibleSubitems = false;\r\n    },\r\n    onClick(e) {\r\n      e.stopPropagation();\r\n      \r\n      if(this.item.onClick)\r\n        this.item.onClick(this.args);\r\n      this.$root.$emit('hide');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"sass\" scoped>\r\n@import '../vars.sass'\r\n@import '../common.sass'\r\n\r\n.item\r\n  @extend .item\r\n  &.hasSubitems:after\r\n    content: '►'\r\n    position: absolute\r\n    opacity: 0.6\r\n    right: 5px\r\n    top: 5px\r\n  .subitems\r\n    position: absolute\r\n    top: 0\r\n    left: 100%\r\n    width: $width\r\n    .subitem\r\n      @extend .item\r\n</style>\r\n","<template lang=\"pug\">\r\n.search\r\n  input(v-model=\"value\")\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['value', 'search'],\r\n  watch: {\r\n    value() {\r\n      this.$emit('search', this.value);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"sass\" scoped>\r\n.search\r\n  input    \r\n    color: white\r\n    padding: 1px 8px\r\n    border: 1px solid white\r\n    border-radius: 10px\r\n    font-size: 16px\r\n    font-family: serif\r\n    width: 100%\r\n    box-sizing: border-box\r\n    background: transparent\r\n</style>\r\n","<template lang=\"pug\">\r\n.context-menu(\r\n  ref=\"menu\"\r\n  v-if=\"visible\"\r\n  v-bind:style=\"style\",\r\n  @mouseleave='timeoutHide()',\r\n  @mouseover=\"cancelHide()\"\r\n  @contextmenu.prevent=\"\"\r\n  @wheel.stop=\"\"\r\n)\r\n  Search(v-if=\"searchBar\", v-model=\"filter\", @search=\"onSearch\")\r\n  Item(v-for='item in filtered'\r\n    :key=\"item.title\"\r\n    :item=\"item\"\r\n    :args=\"args\"\r\n    :delay=\"delay / 2\"\r\n  )\r\n</template>\r\n\r\n<script>\r\nimport hideMixin from './debounceHide'\r\nimport Item from './Item.vue';\r\nimport Search from './Search.vue';\r\nimport { fitViewport } from '../utils';\r\n\r\nexport default {\r\n  props: { searchBar: Boolean, searchKeep: Function },\r\n  mixins: [hideMixin('hide')],\r\n  data() {\r\n    return {\r\n      x: 0,\r\n      y: 0,\r\n      visible: false,\r\n      args: {},\r\n      filter: '',\r\n      items: [],\r\n    }\r\n  },\r\n  computed: {\r\n    style() {\r\n      return {\r\n        top: this.y+'px', \r\n        left: this.x+'px'\r\n      }\r\n    },\r\n    filtered() {\r\n      if(!this.filter) return this.items;\r\n      const regex = new RegExp(this.filter, 'i');\r\n      \r\n      return this.extractLeafs(this.items)\r\n        .filter(({ title }) => {\r\n          return this.searchKeep(title) || title.match(regex)\r\n        });\r\n    }\r\n  },\r\n  methods: {\r\n    extractLeafs(items) {\r\n      if(!items) return [];\r\n      let leafs = [];\r\n      items.map(item => {\r\n        if(!item.subitems) leafs.push(item)\r\n\r\n        leafs.push(...this.extractLeafs(item.subitems))\r\n      })\r\n\r\n      return leafs;\r\n    },\r\n    onSearch(e) {\r\n      this.filter = e;\r\n    },\r\n    show(x, y, args = {}) {\r\n      this.visible = true;\r\n      this.x = x;\r\n      this.y = y;\r\n      this.args = args;\r\n  \r\n      this.cancelHide();\r\n    },\r\n    hide() {\r\n      this.visible = false;\r\n    },\r\n    additem(title, onClick, path = []) {\r\n      let items = this.items;\r\n      for(let level of path) {\r\n        let exist = items.find(i => i.title === level);\r\n\r\n        if(!exist) {\r\n          exist = { title: level, subitems: [] };\r\n          items.push(exist)\r\n        }\r\n\r\n        items = exist.subitems || (exist.subitems = []);\r\n      }\r\n\r\n      items.push({ title, onClick });\r\n    },\r\n  },\r\n  updated() {\r\n    if(this.$refs.menu) {\r\n      [this.x, this.y] = fitViewport([this.x, this.y], this.$refs.menu)\r\n    } \r\n  },\r\n  mounted() {\r\n    this.$root.$on('show', this.show);\r\n    this.$root.$on('hide', this.hide);\r\n    this.$root.$on('additem', this.additem);\r\n  },\r\n  components: {\r\n    Item,\r\n    Search\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"sass\" scoped>\r\n@import '../vars.sass'\r\n@import '../common.sass'\r\n\r\n.context-menu\r\n  left: 0\r\n  top: 0\r\n  position: fixed\r\n  padding: 10px\r\n  width: $width\r\n  margin-top: -20px\r\n  margin-left: -$width/2\r\n  .search\r\n    @extend .item\r\n</style>\r\n","import Menu from './Menu.vue';\r\nimport Vue from 'vue';\r\n\r\nexport default class {\r\n    \r\n    constructor(editor, props, vueComponent) {\r\n        const el = document.createElement('div');\r\n\r\n        editor.view.container.appendChild(el);\r\n\r\n        this.menu = new Vue({\r\n            render: h => h(vueComponent || Menu, { props })\r\n        }).$mount(el);\r\n    }\r\n\r\n    addItem(...args) {\r\n        this.menu.$emit('additem', ...args);\r\n    }\r\n\r\n    show(...args) {\r\n        this.menu.$emit('show', ...args);\r\n    }\r\n\r\n    hide() {\r\n        this.menu.$emit('hide');\r\n    }\r\n}","import { createNode, traverse } from './utils';\r\nimport Menu from './menu/index';\r\n\r\nexport default class MainMenu extends Menu {\r\n    constructor(editor, props, vueComponent, { items, allocate, rename }) {\r\n        super(editor, props, vueComponent);\r\n        \r\n        const mouse = { x: 0, y: 0 };\r\n\r\n        editor.on('mousemove', ({ x, y }) => {\r\n            mouse.x = x;\r\n            mouse.y = y;\r\n        });\r\n        \r\n        for (const component of editor.components.values()) {\r\n            const path = allocate(component);\r\n    \r\n            if (Array.isArray(path)) { // add to the menu if path is array\r\n                this.addItem(rename(component), async () => {\r\n                    editor.addNode(await createNode(component, mouse));\r\n                }, path);\r\n            }\r\n        }\r\n    \r\n        traverse(items, (name, func, path) => this.addItem(name, func, path))\r\n    }\r\n}","import Menu from './menu/index';\r\n// import { createNode, traverse, cloneNode } from './utils';\r\nimport { traverse, cloneNode } from './utils';\r\n\r\nexport default class NodeMenu extends Menu {\r\n    constructor(editor, props, vueComponent, nodeItems, renameNodeMenu) {\r\n        super(editor, props, vueComponent);\r\n\r\n        if (nodeItems['Delete'] !== false) {\r\n            this.addItem(renameNodeMenu('Delete'), ({ node }) => editor.removeNode(node));\r\n        }\r\n        if (nodeItems['Clone'] !== false) {\r\n            this.addItem(renameNodeMenu('Clone'), async (args) => {\r\n                // const { name, position: [x, y], ...params } = args.node;\r\n                // const component = editor.components.get(name);\r\n                // const node = await createNode(component, { ...params, x: x + 10, y: y + 10 });\r\n\r\n                // editor.addNode(node);\r\n                \r\n                // editor.trigger('nodeclone', node);\r\n                cloneNode(editor, args.node, true);\r\n            });\r\n        }\r\n\r\n        traverse(nodeItems, (name, func, path) => this.addItem(renameNodeMenu(name), func, path))\r\n    }\r\n}\r\n","import MainMenu from './main-menu';\r\nimport NodeMenu from './node-menu';\r\nimport VueItem from './menu/Item.vue';\r\nimport VueMenu from './menu/Menu.vue';\r\nimport VueSearch from './menu/Search.vue';\r\nimport { isFunction } from 'lodash-es';\r\nimport { cloneNode } from './utils';\r\n\r\nfunction install(editor, {\r\n    searchBar = true,\r\n    searchKeep = () => false,\r\n    delay = 1000,\r\n    items = {},\r\n    nodeItems = {},\r\n    allocate = () => [],\r\n    rename = component => component.name,\r\n    renameNodeMenu = name => name,\r\n    vueComponent = null\r\n}) {\r\n    editor.bind('hidecontextmenu');\r\n    editor.bind('showcontextmenu');\r\n    editor.bind('nodeclone');\r\n\r\n    let menu = null;\r\n\r\n    editor.on('hidecontextmenu', () => {\r\n        if (menu) menu.hide();\r\n    });\r\n\r\n    editor.on('click contextmenu', () => {\r\n        editor.trigger('hidecontextmenu');\r\n    });\r\n\r\n    editor.on('contextmenu', ({ e, node }) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (!editor.trigger('showcontextmenu', { e, node })) return;\r\n\r\n        const [x, y] = [e.clientX, e.clientY];\r\n\r\n        if (node) {\r\n            menu = new NodeMenu(editor, { searchBar: false, delay }, vueComponent, isFunction(nodeItems) ? nodeItems(node) : nodeItems, renameNodeMenu);\r\n            menu.show(x, y, { node });\r\n        } else {\r\n            menu = new MainMenu(editor, { searchBar, searchKeep, delay }, vueComponent, { items, allocate, rename });\r\n            menu.show(x, y);\r\n        }\r\n    });\r\n}\r\n\r\nexport const Menu = VueMenu;\r\nexport const Item = VueItem;\r\nexport const Search = VueSearch;\r\n\r\nexport default {\r\n    name: 'context-menu',\r\n    install,\r\n    cloneNode,\r\n}\r\n"],"names":["deepCopy","obj","JSON","parse","stringify","createNode","component","data","meta","x","y","node","Object","assign","position","traverse","items","callback","path","keys","map","key","fitViewport","element","Math","min","window","innerWidth","clientWidth","innerHeight","clientHeight","cloneNode","editor","isTrigger","name","params","components","get","nodeFromClone","addNode","trigger","hideMethod","props","delay","type","Number","required","timeoutHide","methods","cancelHide","hide","cancel","mounted","debounce","vueComponent","el","document","createElement","view","container","appendChild","menu","Vue","render","h","Menu","$mount","args","$emit","MainMenu","allocate","rename","mouse","on","Array","isArray","addItem","values","func","NodeMenu","nodeItems","renameNodeMenu","removeNode","install","searchBar","searchKeep","bind","e","preventDefault","stopPropagation","clientX","clientY","isFunction","show","VueMenu","Item","VueItem","Search","VueSearch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;SACnBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,GAAf,CAAX,CAAP;;AAGJ,SAAsBI,UAAtB;;;;;;;0BAAO,iBAA0BC,SAA1B;;;;;;;6BAAuCC,IAAvC,EAAuCA,IAAvC,0BAA8C,EAA9C,+BAAkDC,IAAlD,EAAkDA,IAAlD,0BAAyD,EAAzD,4BAA6DC,CAA7D,EAA6DA,CAA7D,uBAAiE,CAAjE,yBAAoEC,CAApE,EAAoEA,CAApE,uBAAwE,CAAxE;;mBACgBJ,SAAS,CAACD,UAAV,CAAqBL,QAAQ,CAACO,IAAD,CAA7B,CADhB;;;YACGI,IADH;YAGHA,IAAI,CAACH,IAAL,GAAYI,MAAM,CAACC,MAAP,CAAcb,QAAQ,CAACQ,IAAD,CAAtB,EAA8BG,IAAI,CAACH,IAAnC,CAAZ;YACAG,IAAI,CAACG,QAAL,CAAc,CAAd,IAAmBL,CAAnB;YACAE,IAAI,CAACG,QAAL,CAAc,CAAd,IAAmBJ,CAAnB;6CAEOC,IAPJ;;;;;;;;;;;;AAUP,AAAO,SAASI,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAA8C;MAAXC,IAAW,uEAAJ,EAAI;MAC7C,QAAOF,KAAP,MAAiB,QAArB,EAA+B;EAE/BJ,MAAM,CAACO,IAAP,CAAYH,KAAZ,EAAmBI,GAAnB,CAAuB,UAAAC,GAAG,EAAI;QACtB,OAAOL,KAAK,CAACK,GAAD,CAAZ,KAAsB,UAA1B,EACIJ,QAAQ,CAACI,GAAD,EAAML,KAAK,CAACK,GAAD,CAAX,EAAkBH,IAAlB,CAAR,CADJ,KAGIH,QAAQ,CAACC,KAAK,CAACK,GAAD,CAAN,EAAaJ,QAAb,+BAA2BC,IAA3B,IAAiCG,GAAjC,GAAR;GAJR;;AAQJ,AAAO,SAASC,WAAT,QAA6BC,OAA7B,EAAsC;;MAAhBd,CAAgB;MAAbC,CAAa;;SAClC,CACHc,IAAI,CAACC,GAAL,CAAShB,CAAT,EAAYiB,MAAM,CAACC,UAAP,GAAoBJ,OAAO,CAACK,WAAxC,CADG,EAEHJ,IAAI,CAACC,GAAL,CAASf,CAAT,EAAYgB,MAAM,CAACG,WAAP,GAAqBN,OAAO,CAACO,YAAzC,CAFG,CAAP;;;AAOJ,SAAsBC,SAAtB;;;;;;;0BAAO,kBAAyBC,MAAzB,EAAiCrB,IAAjC,EAAuCsB,SAAvC;;;;;;;YACKC,IADL,GAC2CvB,IAD3C,CACKuB,IADL,kCAC2CvB,IAD3C,CACWG,QADX,MACsBL,CADtB,sBACyBC,CADzB,sBACgCyB,MADhC,4BAC2CxB,IAD3C;YAEGL,SAFH,GAEe0B,MAAM,CAACI,UAAP,CAAkBC,GAAlB,CAAsBH,IAAtB,CAFf;;mBAGyB7B,UAAU,CAACC,SAAD,oBAAiB6B,MAAjB;cAAyB1B,CAAC,EAAEA,CAAC,GAAG,EAAhC;cAAoCC,CAAC,EAAEA,CAAC,GAAG;eAH9E;;;YAGG4B,aAHH;YAKHN,MAAM,CAACO,OAAP,CAAeD,aAAf;YAEMrC,GAPH,GAOS;cACVU,IAAI,EAAEA,IADI;cAEV2B,aAAa,EAAEA;aATd;;gBAYCL,SAAJ,EAAe;;cACbD,MAAM,CAACQ,OAAP,CAAe,WAAf,EAA4BvC,GAA5B;;;;;;;;;;;;;AC5CN,iBAAe,UAACwC,UAAD;SAAiB;IAC5BC,KAAK,EAAE;MAAEC,KAAK,EAAE;QAAEC,IAAI,EAAEC,MAAR;QAAgBC,QAAQ,EAAE;;KADd;IAE5BvC,IAF4B,kBAErB;aACI;QACHwC,WAAW,EAAE,uBAAM;OADvB;KAHwB;IAO5BC,OAAO,EAAE;MACLC,UADK,wBACQ;YACHC,IAAI,GAAG,KAAKH,WAAlB;YAEIG,IAAI,IAAIA,IAAI,CAACC,MAAjB,EACI,KAAKJ,WAAL,CAAiBI,MAAjB;;KAZgB;IAe5BC,OAf4B,qBAelB;WACDL,WAAL,GAAmBM,QAAQ,CAAC,KAAKZ,UAAL,CAAD,EAAmB,KAAKE,KAAxB,CAA3B;;GAhBO;CAAf;;;ACiBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAA;;;AAhBA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGZ;;;;;;;CAAA;;;AAHA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAA;;;AAtBA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBCEIX,MAAZ,EAAoBU,KAApB,EAA2BY,YAA3B,EAAyC;;;QAC/BC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAX;IAEAzB,MAAM,CAAC0B,IAAP,CAAYC,SAAZ,CAAsBC,WAAtB,CAAkCL,EAAlC;SAEKM,IAAL,GAAY,IAAIC,GAAJ,CAAQ;MAChBC,MAAM,EAAE,gBAAAC,CAAC;eAAIA,CAAC,CAACV,YAAY,IAAIW,IAAjB,EAAuB;UAAEvB,KAAK,EAALA;SAAzB,CAAL;;KADD,EAETwB,MAFS,CAEFX,EAFE,CAAZ;;;;;8BAKa;;;wCAANY,IAAM;QAANA,IAAM;;;yBACRN,IAAL,EAAUO,KAAV,oBAAgB,SAAhB,SAA8BD,IAA9B;;;;2BAGU;;;yCAANA,IAAM;QAANA,IAAM;;;0BACLN,IAAL,EAAUO,KAAV,qBAAgB,MAAhB,SAA2BD,IAA3B;;;;2BAGG;WACEN,IAAL,CAAUO,KAAV,CAAgB,MAAhB;;;;;;;ICrBaC;;;;;oBACLrC,MAAZ,EAAoBU,KAApB,EAA2BY,YAA3B,QAAsE;;;QAA3BtC,KAA2B,QAA3BA,KAA2B;QAApBsD,QAAoB,QAApBA,QAAoB;QAAVC,MAAU,QAAVA,MAAU;;;;kFAC5DvC,MAAN,EAAcU,KAAd,EAAqBY,YAArB;QAEMkB,KAAK,GAAG;MAAE/D,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;KAAzB;IAEAsB,MAAM,CAACyC,EAAP,CAAU,WAAV,EAAuB,iBAAc;UAAXhE,CAAW,SAAXA,CAAW;UAARC,CAAQ,SAARA,CAAQ;MACjC8D,KAAK,CAAC/D,CAAN,GAAUA,CAAV;MACA+D,KAAK,CAAC9D,CAAN,GAAUA,CAAV;KAFJ;;;;;;;YAKWJ,SAVuD;YAWxDY,IAAI,GAAGoD,QAAQ,CAAChE,SAAD,CAArB;;YAEIoE,KAAK,CAACC,OAAN,CAAczD,IAAd,CAAJ,EAAyB;;gBAChB0D,OAAL,CAAaL,MAAM,CAACjE,SAAD,CAAnB;;;;kCAAgC;;;;;kCAC5B0B,MAD4B;;2BACP3B,UAAU,CAACC,SAAD,EAAYkE,KAAZ,CADH;;;;;gCACrBjC,OADqB;;;;;;;;WAAhC,IAEGrB,IAFH;;;;2BAJgBc,MAAM,CAACI,UAAP,CAAkByC,MAAlB,EAAxB,8HAAoD;;;;;;;;;;;;;;;;;;IAUpD9D,QAAQ,CAACC,KAAD,EAAQ,UAACkB,IAAD,EAAO4C,IAAP,EAAa5D,IAAb;aAAsB,MAAK0D,OAAL,CAAa1C,IAAb,EAAmB4C,IAAnB,EAAyB5D,IAAzB,CAAtB;KAAR,CAAR;;;;;EArB8B+C;;ICCjBc;;;;;oBACL/C,MAAZ,EAAoBU,KAApB,EAA2BY,YAA3B,EAAyC0B,SAAzC,EAAoDC,cAApD,EAAoE;;;;;kFAC1DjD,MAAN,EAAcU,KAAd,EAAqBY,YAArB;;QAEI0B,SAAS,CAAC,QAAD,CAAT,KAAwB,KAA5B,EAAmC;YAC1BJ,OAAL,CAAaK,cAAc,CAAC,QAAD,CAA3B,EAAuC;YAAGtE,IAAH,QAAGA,IAAH;eAAcqB,MAAM,CAACkD,UAAP,CAAkBvE,IAAlB,CAAd;OAAvC;;;QAEAqE,SAAS,CAAC,OAAD,CAAT,KAAuB,KAA3B,EAAkC;YACzBJ,OAAL,CAAaK,cAAc,CAAC,OAAD,CAA3B;;;;;gCAAsC,iBAAOd,IAAP;;;;;;;;;;kBAQlCpC,SAAS,CAACC,MAAD,EAASmC,IAAI,CAACxD,IAAd,EAAoB,IAApB,CAAT;;;;;;;;SARJ;;;;;;;;IAYJI,QAAQ,CAACiE,SAAD,EAAY,UAAC9C,IAAD,EAAO4C,IAAP,EAAa5D,IAAb;aAAsB,MAAK0D,OAAL,CAAaK,cAAc,CAAC/C,IAAD,CAA3B,EAAmC4C,IAAnC,EAAyC5D,IAAzC,CAAtB;KAAZ,CAAR;;;;;EApB8B+C;;ACItC,SAASkB,OAAT,CAAiBnD,MAAjB,QAUG;4BATCoD,SASD;MATCA,SASD,+BATa,IASb;6BARCC,UAQD;MARCA,UAQD,gCARc;WAAM,KAAN;GAQd;wBAPC1C,KAOD;MAPCA,KAOD,2BAPS,IAOT;wBANC3B,KAMD;MANCA,KAMD,2BANS,EAMT;4BALCgE,SAKD;MALCA,SAKD,+BALa,EAKb;2BAJCV,QAID;MAJCA,QAID,8BAJY;WAAM,EAAN;GAIZ;yBAHCC,MAGD;MAHCA,MAGD,4BAHU,UAAAjE,SAAS;WAAIA,SAAS,CAAC4B,IAAd;GAGnB;iCAFC+C,cAED;MAFCA,cAED,oCAFkB,UAAA/C,IAAI;WAAIA,IAAJ;GAEtB;+BADCoB,YACD;MADCA,YACD,kCADgB,IAChB;EACCtB,MAAM,CAACsD,IAAP,CAAY,iBAAZ;EACAtD,MAAM,CAACsD,IAAP,CAAY,iBAAZ;EACAtD,MAAM,CAACsD,IAAP,CAAY,WAAZ;MAEIzB,IAAI,GAAG,IAAX;EAEA7B,MAAM,CAACyC,EAAP,CAAU,iBAAV,EAA6B,YAAM;QAC3BZ,IAAJ,EAAUA,IAAI,CAACX,IAAL;GADd;EAIAlB,MAAM,CAACyC,EAAP,CAAU,mBAAV,EAA+B,YAAM;IACjCzC,MAAM,CAACQ,OAAP,CAAe,iBAAf;GADJ;EAIAR,MAAM,CAACyC,EAAP,CAAU,aAAV,EAAyB,iBAAiB;QAAdc,CAAc,SAAdA,CAAc;QAAX5E,IAAW,SAAXA,IAAW;IACtC4E,CAAC,CAACC,cAAF;IACAD,CAAC,CAACE,eAAF;QAEI,CAACzD,MAAM,CAACQ,OAAP,CAAe,iBAAf,EAAkC;MAAE+C,CAAC,EAADA,CAAF;MAAK5E,IAAI,EAAJA;KAAvC,CAAL,EAAqD;gBAEtC,CAAC4E,CAAC,CAACG,OAAH,EAAYH,CAAC,CAACI,OAAd,CANuB;QAM/BlF,CAN+B;QAM5BC,CAN4B;;QAQlCC,IAAJ,EAAU;MACNkD,IAAI,GAAG,IAAIkB,QAAJ,CAAa/C,MAAb,EAAqB;QAAEoD,SAAS,EAAE,KAAb;QAAoBzC,KAAK,EAALA;OAAzC,EAAkDW,YAAlD,EAAgEsC,UAAU,CAACZ,SAAD,CAAV,GAAwBA,SAAS,CAACrE,IAAD,CAAjC,GAA0CqE,SAA1G,EAAqHC,cAArH,CAAP;MACApB,IAAI,CAACgC,IAAL,CAAUpF,CAAV,EAAaC,CAAb,EAAgB;QAAEC,IAAI,EAAJA;OAAlB;KAFJ,MAGO;MACHkD,IAAI,GAAG,IAAIQ,QAAJ,CAAarC,MAAb,EAAqB;QAAEoD,SAAS,EAATA,SAAF;QAAaC,UAAU,EAAVA,UAAb;QAAyB1C,KAAK,EAALA;OAA9C,EAAuDW,YAAvD,EAAqE;QAAEtC,KAAK,EAALA,KAAF;QAASsD,QAAQ,EAARA,QAAT;QAAmBC,MAAM,EAANA;OAAxF,CAAP;MACAV,IAAI,CAACgC,IAAL,CAAUpF,CAAV,EAAaC,CAAb;;GAbR;;;AAkBJ,IAAauD,MAAI,GAAG6B;AACpB,IAAaC,MAAI,GAAGC;AACpB,IAAaC,QAAM,GAAGC;AAEtB,YAAe;EACXhE,IAAI,EAAE,cADK;EAEXiD,OAAO,EAAPA,OAFW;EAGXpD,SAAS,EAATA;CAHJ;;;;;"}